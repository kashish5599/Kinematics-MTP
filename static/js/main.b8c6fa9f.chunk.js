(this.webpackJsonpmtp=this.webpackJsonpmtp||[]).push([[0],{24:function(e,t,n){},32:function(e,t){},33:function(e,t){},34:function(e,t){},36:function(e,t,n){"use strict";n.r(t);var i,r,c,a,o,s,d,l,u=n(0),b=n.n(u),j=n(14),f=n.n(j),h=(n(24),n(2)),g=n(3),v=Object(g.a)(i||(i=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),O=Object(g.a)(r||(r=Object(h.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]))),p=(Object(g.a)(c||(c=Object(h.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),Object(g.a)(a||(a=Object(h.a)(["\n  position: absolute;\n  top: 50%;\n  transform: translate(0%, -50%);\n"]))),Object(g.a)(o||(o=Object(h.a)(["\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n"]))),Object(g.a)(s||(s=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),Object(g.a)(d||(d=Object(h.a)(["\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),g.b.div(l||(l=Object(h.a)(["\n  ","\n  align-items: flex-start;\n  height: 100%;\n  width: 100%;\n"])),v)),x=n(19),m=n(4),C=n(6),y=n(18),w=n(5);w.fabric.Object.prototype.originX=w.fabric.Object.prototype.originY="center",w.fabric.LineArrow=w.fabric.util.createClass(w.fabric.Line,{type:"lineArrow",initialize:function(e,t){t||(t={}),this.callSuper("initialize",e,t)},toObject:function(){return w.fabric.util.object.extend(this.callSuper("toObject"))},_render:function(e){if(this.callSuper("_render",e),0!==this.width&&0!==this.height&&this.visible){e.save();var t=this.x2-this.x1,n=this.y2-this.y1,i=Math.atan2(n,t),r=Math.sqrt(3)/2*this.strokeWidth,c=this.x2+this.destCurve.a/2*Math.cos(i),a=this.y2+this.destCurve.b/2*Math.sin(i),o=Math.sqrt(Math.pow(c-this.x2,2)+Math.pow(a-this.y2,2));e.translate(t/2,n/2),e.rotate(i),e.beginPath(),e.moveTo(r-o,0),e.lineTo(-3*r-o,2.5*r),e.lineTo(-3*r-o,-2.5*r),e.closePath(),e.fillStyle=this.stroke,e.fill(),e.restore()}}}),w.fabric.LineArrow.fromObject=function(e,t){t&&t(new w.fabric.LineArrow([e.x1,e.y1,e.x2,e.y2],e))},w.fabric.LineArrow.async=!0;var A,S,E,k,M=w.fabric,F={radius:20},T={nodeCount:0},N="#808080",D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(Math.random()*(t-e+1)+e)},I=function(e,t){var n=t.edge,i=t.node,r=e.getObjects().find((function(e){return e.id===n}));return new M.LineArrow([i.left,i.top,r.left,r.top],{fill:"red",stroke:"red",strokeWidth:5,selectable:!1,evented:!1,destCurve:{a:r.width,b:r.height}})},J=function(e){e.edges.forEach((function(t){return t.line.set({x1:e.left,y1:e.top})})),e.incomingEdges.forEach((function(t){return t.line.set({x2:e.left,y2:e.top})}))},L=function(e,t){var n=t.id,i=t.title,r=e.vptCoords.br,c=new M.Circle({radius:30,fill:N,originX:"center",originY:"center"}),a=new M.Text(i.toString(),{fontSize:20,originX:"center",originY:"center"}),o=new M.Group([c,a],{left:D(30,r.x-30),top:D(30,r.y-30),type:"node",id:n,text:i,edges:[],incomingEdges:[],controls:!1});return o.on("selected",(function(t){e.fire("custom:update",t.target),e.fire("node:selection",t.target)})).on("deselected",(function(t){e.fire("node:deselection",t.target),e.fire("custom:deselection",t.target)})).on("scaling",(function(t){e.fire("custom:update",t.target)})).on("moving",(function(t){e.fire("node:moving",t.transform.target)})),o},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(null===t||void 0===t?void 0:t.node)||e.getActiveObject();switch(Object.keys(t)[0]){case"text":return n.item(1).set(t),void n.set(t);case"move":return J(n),void e.renderAll();case"edge":var i=I(e,t);n.edges.push({nodeId:t.edge,line:i});var r=e.getObjects().find((function(e){return e.id===t.edge}));return r.incomingEdges.push({nodeId:n.id,line:i}),e.fire("custom:update",n),void e.add(i).sendToBack(i).renderAll();case"selected":return n.item(0).set({fill:t.selected?"red":N}),void e.renderAll();default:return void console.log("tf u doing")}},G=Object(y.a)((function(){var e=Object(u.useState)(null),t=Object(C.a)(e,2),n=t[0],i=t[1],r=Object(u.useState)(null),c=Object(C.a)(r,2),a=c[0],o=c[1],s=Object(u.useState)(T),d=Object(C.a)(s,2),l=d[0],b=d[1],j=Object(u.useCallback)((function(e,t,n){if(e){var r=new M.Canvas(t,n);r.on("custom:update",(function(e){return o((function(t){return t?Object(m.a)(Object(m.a)({},t),e):e}))})),r.on("node:selection",(function(e){return B(r,{selected:!0,node:e})})),r.on("custom:deselection",(function(){return o(null)})),r.on("node:deselection",(function(e){return B(r,{selected:!1,node:e})})),r.on("node:moving",(function(e){return B(r,{move:!0,node:e})})),i(r)}}),[]),f=Object(u.useCallback)((function(){n.dispose()}),[n]),h=Object(u.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;if(n){var t=L(n,{id:"node-".concat(l.nodeCount+1),title:(null===e||void 0===e?void 0:e.title)||l.nodeCount+1});n.add(t).setActiveObject(t),b(Object(m.a)(Object(m.a)({},l),{},{nodeCount:l.nodeCount+1}))}}),[n,l,b]),g=Object(u.useCallback)((function(e){n&&(B(n,e),n.renderAll())}),[n]),v=Object(u.useCallback)((function(e,t){g({edge:t,node:e})}),[g]),O=Object(u.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("ADJMAT"===e){var i=n.getObjects("node").length,r=[];Object(x.a)(Array(t.length)).forEach((function(e,t){var c=L(n,{id:"node-".concat(i+t+1),title:i+t+1});n.add(c),r.push(c)})),b((function(e){return Object(m.a)(Object(m.a)({},e),{},{nodeCount:(null===e||void 0===e?void 0:e.nodeCount)?(null===e||void 0===e?void 0:e.nodeCount)+t.length:t.length})})),t.forEach((function(e,t){var n=r[t];e.forEach((function(e,i){"0"!==e&&t!==i&&v(n,r[i].id)}))})),o(null)}else console.log("Jld hi")}),[n,v]);return{canvas:n,initCanvas:j,resetCanvas:f,isCanvasActive:!!n,addNode:h,selected:a,canvasState:l,setCanvasState:b,updateNode:g,addEdge:v,setSelected:o,addGraph:O}})),P=n(1),z=g.b.div(A||(A=Object(h.a)(["\n  ","\n  width: 100%;\n  justify-content: flex-start;\n  height: 100%;\n"])),O),W=g.b.div(S||(S=Object(h.a)(["\n  width: 75%;\n  height: 100%;\n"]))),q=g.b.div(E||(E=Object(h.a)(["\n  ","\n  width: 25%;\n  height: 100%;\n  justify-content: flex-start;\n"])),v),R=g.b.div(k||(k=Object(h.a)([""])));var X=function(){var e=Object(u.useRef)(null),t=Object(u.useRef)(null),n=G.useContainer().initCanvas;return Object(u.useEffect)((function(){t.current&&n(t,"main-canvas",{width:e.current.clientWidth,height:e.current.clientHeight,backgroundColor:"#F2F2F2",preserveObjectStacking:!0})}),[n]),Object(P.jsx)(W,{ref:e,children:Object(P.jsx)("canvas",{id:"main-canvas",ref:t})})};var Y=function(){var e=Object(u.useState)(""),t=Object(C.a)(e,2),n=t[0],i=t[1],r=Object(u.useState)("ADJMAT"),c=Object(C.a)(r,2),a=c[0],o=c[1],s=G.useContainer().addGraph;return Object(P.jsxs)(R,{children:[Object(P.jsx)("h3",{children:"Add a graph"}),Object(P.jsxs)("form",{children:[Object(P.jsx)("p",{children:"Graph Input Type"}),Object(P.jsxs)("div",{className:"graph-input-select",onChange:function(e){i(""),o(e.target.value)},children:[Object(P.jsx)("input",{type:"radio",defaultChecked:!0,id:"graph-option-adj-mat",name:"graph-input-type",value:"ADJMAT"}),Object(P.jsx)("label",{htmlFor:"graph-option-adj-mat",children:"Adjacency Matrix"}),Object(P.jsx)("input",{type:"radio",id:"graph-option-edges",name:"graph-input-type",value:"EDGE"}),Object(P.jsx)("label",{htmlFor:"graph-option-edges",children:"Edges"})]}),Object(P.jsx)("textarea",{rows:"4",name:"graph-input",value:n,onChange:function(e){i(e.target.value)}}),Object(P.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var t=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t={message:"all good",status:"true"};if("ADJMAT"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ADJMAT")){var n=e.replace(/\n+/g,"\n").trim().split("\n").map((function(e){return e.replace(/\s+/g," ").trim().split(" ")}));if(n.every((function(e,i){return e.length===n.length||(t={message:"Please input a square matrix. Row ".concat(i+1," of invalid size"),status:!1},!1)})),!t.status)return t;t={status:!0,message:n}}return t}(a,n);t.status?(s(a,t.message),i("")):alert(t.message)},children:"Add"})]})]})},_=n(10);var H=function(){var e=G.useContainer(),t=e.canvas,n=e.updateNode,i=e.selected,r=e.addEdge,c=Object(u.useState)(i),a=Object(C.a)(c,2),o=a[0],s=a[1],d=Object(u.useState)([]),l=Object(C.a)(d,2),b=l[0],j=l[1];return Object(u.useEffect)((function(){s((function(e){return Object(m.a)(Object(m.a)({},e),i)}))}),[i]),Object(u.useEffect)((function(){j(t.getObjects().filter((function(e){var t=e.id;return"node"===e.type&&t!==i.id&&!i.edges.find((function(e){return e.nodeId===t}))})).map((function(e){return e.id})))}),[j,i,t]),Object(P.jsxs)("div",{className:"node-options",children:[Object(P.jsxs)("p",{children:["Id: ",o.id]}),Object(P.jsx)("label",{htmlFor:"text",children:"Name:"}),Object(P.jsx)("input",{value:o.text,name:"text",onChange:function(e){var t=Object(_.a)({},e.target.name,e.target.value);s((function(e){return Object(m.a)(Object(m.a)({},e),t)})),n(t)}}),Object(P.jsx)("h5",{children:"Edges:"}),i.edges.length>0?Object(P.jsx)("ul",{children:i.edges.map((function(e){return Object(P.jsxs)("li",{children:["With ",e.nodeId]},e.nodeId)}))}):Object(P.jsx)("p",{children:"No edges for this node"}),b.length>0?Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(i,e.target.getElementsByTagName("select")[0].value)},children:[Object(P.jsx)("label",{htmlFor:"edge",children:"Add edge: "}),Object(P.jsx)("select",{name:"edge",children:b.map((function(e){return Object(P.jsx)("option",{value:e,children:e},e)}))}),Object(P.jsx)("button",{type:"submit",children:"Add Edge"})]}):Object(P.jsx)("p",{children:"No node available for an edge"})]})};var K=function(){var e=G.useContainer().selected;return Object(P.jsx)(q,{children:e?function(){switch(e.type){case"node":return Object(P.jsx)(H,{});case"graph":return Object(P.jsx)(Y,{});default:return Object(P.jsx)("div",{children:"Error"})}}():"Select an object to view its properties"})};var Q,U=function(){return Object(P.jsxs)(z,{children:[Object(P.jsx)(K,{}),Object(P.jsx)(X,{})]})},V=g.b.div(Q||(Q=Object(h.a)(["\n  ","\n  box-sizing: border-box;\n  padding: 1em;\n  width: 100%;\n  justify-content: flex-start;\n  border-bottom: 1px solid ",";\n"])),O,"#BFBFBF");var Z=function(){var e=G.useContainer(),t=e.isCanvasActive,n=e.addNode,i=e.setSelected;return Object(P.jsxs)(V,{children:[Object(P.jsx)("button",{onClick:function(){return t?n():console.log("Canvas not loaded")},className:"sidebar-btn",disabled:!t,children:"Add Node"}),Object(P.jsx)("button",{onClick:function(){return t?i({type:"graph"}):console.log("Canvas not loaded")},className:"sidebar-btn",disabled:!t,children:"Add Graph"})]})};var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return function(n){return e.reduce((function(e,t){return Object(P.jsx)(t.Provider,{children:e})}),Object(P.jsx)(t,Object(m.a)({},n)))}}}([G])((function(){return Object(P.jsxs)(p,{children:[Object(P.jsx)(Z,{}),Object(P.jsx)(U,{})]})})),ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),c(e),a(e)}))};f.a.render(Object(P.jsx)(b.a.StrictMode,{children:Object(P.jsx)($,{})}),document.getElementById("root")),ee()}},[[36,1,2]]]);
//# sourceMappingURL=main.b8c6fa9f.chunk.js.map