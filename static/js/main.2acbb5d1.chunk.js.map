{"version":3,"sources":["elements/helpers.js","elements/app.js","modules/fabric/index.js","data/config.js","components/content/components/canvas/components/edge.js","components/content/components/canvas/components/node.js","stores/canvasStore.js","components/content/elements/index.js","components/content/components/canvas/index.js","components/content/components/sidebar/components/nodeOptions.js","components/content/components/sidebar/index.js","components/content/index.js","components/navbar/elements/index.js","components/navbar/index.js","components/index.js","utils/withStore.js","reportWebVitals.js","index.js"],"names":["vFlex","css","hFlex","AppEl","styled","div","fabric","Object","prototype","originX","originY","LineArrow","util","createClass","Line","type","initialize","el","options","this","callSuper","toObject","object","extend","_render","ctx","width","height","visible","save","xDiff","x2","x1","yDiff","y2","y1","angle","Math","atan2","d","sqrt","strokeWidth","arrowx","destCurve","a","cos","arrowy","b","sin","arrow","translate","rotate","beginPath","moveTo","lineTo","closePath","fillStyle","stroke","fill","restore","fromObject","callback","async","initCanvasState","nodeCount","createEdge","canvas","childId","edge","p","getActiveObject","c","getObjects","find","id","left","top","selectable","evented","moveEdge","node","edges","forEach","line","set","incomingEdges","createNode","title","circle","Circle","radius","text","Text","toString","fontSize","grp","Group","controls","on","e","fire","target","transform","updateNodeData","data","keys","item","renderAll","push","nodeId","node2","add","sendToBack","console","log","CanvasStore","createContainer","useState","setCanvas","selected","setSelected","canvasState","setCanvasState","initCanvas","useCallback","canvasId","canvasOptions","Canvas","option","prevState","move","resetCanvas","dispose","addNode","newNode","setActiveObject","updateNode","addEdge","isCanvasActive","ContentEl","CanvasEl","SidebarEl","canvasContainer","useRef","canvasRef","useContainer","useEffect","current","clientWidth","clientHeight","backgroundColor","preserveObjectStacking","ref","NodeOptions","nodeState","setNodeState","otherNodes","setOtherNodes","prev","filter","map","className","htmlFor","value","name","onChange","update","length","onSubmit","preventDefault","getElementsByTagName","Sidebar","Content","NavbarEl","Navbar","onClick","disabled","withStore","stores","WrappedComponent","props","reduce","component","Store","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2acbb5d1.chunk.js","sourcesContent":["import { css } from \"styled-components\";\r\n\r\nexport const square = (size) => css`\r\n  height: ${size};\r\n  width: ${size};\r\n  min-height: ${size};\r\n  min-width: ${size};\r\n`;\r\n\r\nexport const vFlex = css`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nexport const hFlex = css`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nexport const center = css`\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nexport const vCenter = css`\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translate(0%, -50%);\r\n`;\r\n\r\nexport const hCenter = css`\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translate(-50%, 0);\r\n`;\r\n\r\nexport const background = (image, fit = \"contain\") => css`\r\n  background: url(${image}) center center / ${fit} no-repeat;\r\n`;\r\n\r\nexport const overlay = css`\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n`;\r\n\r\nexport const singleLineText = css`\r\n  width: 100%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nexport const horizontalSplit = (parts, spacing) => css`\r\n  position: relative;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: flex-start;\r\n\r\n  & > * {\r\n    width: ${(100 - spacing * (parts - 1) * 2) / parts}%;\r\n    margin: 0 ${spacing}%;\r\n\r\n    &:nth-child(${parts}n+1) {\r\n      margin-left: 0;\r\n    }\r\n\r\n    &:nth-child(${parts}n) {\r\n      margin-right: 0;\r\n    }\r\n  }\r\n`;\r\n","import styled from \"styled-components\";\r\nimport { vFlex } from \"./helpers\";\r\n\r\nexport const AppEl = styled.div`\r\n  ${vFlex}\r\n  align-items: flex-start;\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n","import { fabric } from \"fabric\";\r\n\r\nfabric.Object.prototype.originX = fabric.Object.prototype.originY = \"center\";\r\n\r\nfabric.LineArrow = fabric.util.createClass(fabric.Line, {\r\n  type: \"lineArrow\",\r\n  initialize: function (el, options) {\r\n    options || (options = {});\r\n\r\n    this.callSuper(\"initialize\", el, options);\r\n  },\r\n  toObject: function () {\r\n    return fabric.util.object.extend(this.callSuper(\"toObject\"));\r\n  },\r\n  _render: function (ctx) {\r\n    this.callSuper(\"_render\", ctx);\r\n\r\n    if (this.width === 0 || this.height === 0 || !this.visible) return;\r\n\r\n    ctx.save();\r\n\r\n    var xDiff = this.x2 - this.x1;\r\n    var yDiff = this.y2 - this.y1;\r\n    var angle = Math.atan2(yDiff, xDiff);\r\n    var d = (Math.sqrt(3) / 2) * this.strokeWidth;\r\n    var arrowx = this.x2 + (this.destCurve.a / 2) * Math.cos(angle);\r\n    var arrowy = this.y2 + (this.destCurve.b / 2) * Math.sin(angle);\r\n    var arrow = Math.sqrt((arrowx - this.x2) ** 2 + (arrowy - this.y2) ** 2);\r\n\r\n    ctx.translate(xDiff / 2, yDiff / 2);\r\n    ctx.rotate(angle);\r\n    ctx.beginPath();\r\n    ctx.moveTo(d - arrow, 0);\r\n    ctx.lineTo(-3 * d - arrow, (5 / 2) * d);\r\n    ctx.lineTo(-3 * d - arrow, (-5 / 2) * d);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.stroke;\r\n    ctx.fill();\r\n\r\n    ctx.restore();\r\n  },\r\n});\r\n\r\nfabric.LineArrow.fromObject = function (object, callback) {\r\n  callback &&\r\n    callback(\r\n      new fabric.LineArrow([object.x1, object.y1, object.x2, object.y2], object)\r\n    );\r\n};\r\n\r\nfabric.LineArrow.async = true;\r\n\r\nexport default fabric;\r\n","export const defaultNode = {\r\n  radius: 20,\r\n};\r\n\r\nexport const initCanvasState = {\r\n  nodeCount: 0,\r\n};\r\n","import fabric from \"../../../../../modules/fabric\";\r\n\r\nexport const createEdge = (canvas, { edge: childId }) => {\r\n  const p = canvas.getActiveObject();\r\n  const c = canvas.getObjects().find(({ id }) => id === childId);\r\n\r\n  const edge = new fabric.LineArrow([p.left, p.top, c.left, c.top], {\r\n    fill: \"red\",\r\n    stroke: \"red\",\r\n    strokeWidth: 5,\r\n    selectable: false,\r\n    evented: false,\r\n    destCurve: { a: c.width, b: c.height },\r\n  });\r\n\r\n  return edge;\r\n};\r\n\r\nexport const moveEdge = (node) => {\r\n  node.edges.forEach(({ line }) => line.set({ x1: node.left, y1: node.top }));\r\n  node.incomingEdges.forEach(({ line }) =>\r\n    line.set({ x2: node.left, y2: node.top })\r\n  );\r\n};\r\n","import fabric from \"../../../../../modules/fabric\";\r\nimport { createEdge, moveEdge } from \"./edge\";\r\n\r\nexport const createNode = (canvas, { id, title }) => {\r\n  const circle = new fabric.Circle({\r\n    radius: 30,\r\n    fill: \"gray\",\r\n    originX: \"center\",\r\n    originY: \"center\",\r\n  });\r\n  const text = new fabric.Text(title.toString(), {\r\n    fontSize: 20,\r\n    originX: \"center\",\r\n    originY: \"center\",\r\n  });\r\n\r\n  const grp = new fabric.Group([circle, text], {\r\n    left: 150,\r\n    top: 150,\r\n    type: \"node\",\r\n    id,\r\n    text: title,\r\n    edges: [], //Each edge -> {nodeId: \"\", line: lineData}\r\n    incomingEdges: [],\r\n    controls: false,\r\n  });\r\n\r\n  grp\r\n    .on(\"selected\", function (e) {\r\n      canvas.fire(\"custom:update\", e.target);\r\n    })\r\n    .on(\"deselected\", function (e) {\r\n      canvas.fire(\"custom:deselection\", e.target);\r\n    })\r\n    .on(\"scaling\", function (e) {\r\n      canvas.fire(\"custom:update\", e.target);\r\n    })\r\n    .on(\"moving\", function (e) {\r\n      canvas.fire(\"node:moving\", e.transform.target);\r\n    });\r\n\r\n  return grp;\r\n};\r\n\r\nexport const updateNodeData = (canvas, data = {}) => {\r\n  const node = data?.node || canvas.getActiveObject();\r\n\r\n  switch (Object.keys(data)[0]) {\r\n    case \"text\":\r\n      node.item(1).set(data);\r\n      node.set(data);\r\n      return;\r\n    case \"move\":\r\n      moveEdge(node);\r\n      canvas.renderAll();\r\n      return;\r\n    case \"edge\":\r\n      const edge = createEdge(canvas, data);\r\n      node.edges.push({ nodeId: data.edge, line: edge });\r\n      const node2 = canvas.getObjects().find(({ id }) => id === data.edge);\r\n      node2.incomingEdges.push({ nodeId: node.id, line: edge });\r\n      canvas.fire(\"custom:update\", node);\r\n      canvas.add(edge).sendToBack(edge).renderAll();\r\n      return;\r\n    default:\r\n      console.log(\"tf u doing\");\r\n      return;\r\n  }\r\n};\r\n","import { useCallback, useState } from \"react\";\r\nimport { createContainer } from \"unstated-next\";\r\nimport fabric from \"../modules/fabric\";\r\nimport { defaultNode, initCanvasState } from \"../data/config\";\r\nimport {\r\n  createNode,\r\n  updateNodeData,\r\n} from \"../components/content/components/canvas/components/node\";\r\n\r\nconst CanvasStore = createContainer(() => {\r\n  const [canvas, setCanvas] = useState(null);\r\n  const [selected, setSelected] = useState(null);\r\n  const [canvasState, setCanvasState] = useState(initCanvasState);\r\n\r\n  const initCanvas = useCallback((node, canvasId, canvasOptions) => {\r\n    if (!!node) {\r\n      var canvas = new fabric.Canvas(canvasId, canvasOptions);\r\n\r\n      canvas.on(\"custom:update\", (option) =>\r\n        setSelected((prevState) =>\r\n          prevState ? { ...prevState, ...option } : option\r\n        )\r\n      );\r\n      canvas.on(\"custom:deselection\", () => setSelected(null));\r\n      canvas.on(\"node:moving\", (option) =>\r\n        updateNodeData(canvas, { move: true, node: option })\r\n      );\r\n      setCanvas(canvas);\r\n    }\r\n  }, []);\r\n\r\n  const resetCanvas = useCallback(() => {\r\n    canvas.dispose();\r\n    // setCanvas(null);\r\n    // // eslint-disable-next-line\r\n  }, [canvas]);\r\n\r\n  const addNode = useCallback(\r\n    (options = defaultNode) => {\r\n      if (canvas) {\r\n        const newNode = createNode(canvas, {\r\n          id: `node-${canvasState.nodeCount + 1}`,\r\n          title: canvasState.nodeCount + 1,\r\n        });\r\n\r\n        canvas.add(newNode).setActiveObject(newNode);\r\n        setCanvasState({\r\n          ...canvasState,\r\n          nodeCount: canvasState.nodeCount + 1,\r\n        });\r\n      }\r\n    },\r\n    [canvas, canvasState, setCanvasState]\r\n  );\r\n\r\n  const updateNode = useCallback(\r\n    (data) => {\r\n      if (canvas) {\r\n        updateNodeData(canvas, data);\r\n        canvas.renderAll();\r\n      }\r\n    },\r\n    [canvas]\r\n  );\r\n\r\n  const addEdge = useCallback((data) => console.log(data), []);\r\n\r\n  return {\r\n    canvas,\r\n    initCanvas,\r\n    resetCanvas,\r\n    isCanvasActive: !!canvas,\r\n    addNode,\r\n    selected,\r\n    canvasState,\r\n    setCanvasState,\r\n    updateNode,\r\n    addEdge,\r\n  };\r\n});\r\n\r\nexport default CanvasStore;\r\n","import styled from \"styled-components\";\r\nimport { hFlex, vFlex } from \"../../../elements/helpers\";\r\n\r\nexport const ContentEl = styled.div`\r\n  ${hFlex}\r\n  width: 100%;\r\n  justify-content: flex-start;\r\n  height: 100%;\r\n`;\r\n\r\nexport const CanvasEl = styled.div`\r\n  width: 75%;\r\n  height: 100%;\r\n`;\r\n\r\nexport const SidebarEl = styled.div`\r\n  ${vFlex}\r\n  width: 25%;\r\n  height: 100%;\r\n  justify-content: flex-start;\r\n`;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport CanvasStore from \"../../../../stores/canvasStore\";\r\nimport { CanvasEl } from \"../../elements\";\r\n\r\nfunction Canvas() {\r\n  const canvasContainer = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  const { initCanvas } = CanvasStore.useContainer();\r\n\r\n  useEffect(() => {\r\n    if (!canvasRef.current) return;\r\n    initCanvas(canvasRef, \"main-canvas\", {\r\n      width: canvasContainer.current.clientWidth,\r\n      height: canvasContainer.current.clientHeight,\r\n      backgroundColor: \"lightgray\",\r\n      preserveObjectStacking: true,\r\n    });\r\n  }, [initCanvas]);\r\n\r\n  return (\r\n    <CanvasEl ref={canvasContainer}>\r\n      <canvas id=\"main-canvas\" ref={canvasRef} />\r\n    </CanvasEl>\r\n  );\r\n}\r\n\r\nexport default Canvas;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport CanvasStore from \"../../../../../stores/canvasStore\";\r\n\r\nfunction NodeOptions() {\r\n  const { canvas, updateNode, selected } = CanvasStore.useContainer();\r\n  const [nodeState, setNodeState] = useState(selected);\r\n  const [otherNodes, setOtherNodes] = useState([]);\r\n\r\n  const handleChange = (e) => {\r\n    const update = { [e.target.name]: e.target.value };\r\n    setNodeState((prev) => ({ ...prev, ...update }));\r\n    updateNode(update);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setNodeState((prev) => ({ ...prev, ...selected }));\r\n  }, [selected]);\r\n\r\n  useEffect(() => {\r\n    setOtherNodes(\r\n      canvas\r\n        .getObjects()\r\n        .filter(\r\n          ({ id, type }) =>\r\n            type === \"node\" &&\r\n            id !== selected.id &&\r\n            !selected.edges.find(({ nodeId }) => nodeId === id)\r\n        )\r\n        .map(({ id }) => id)\r\n    );\r\n  }, [setOtherNodes, selected, canvas]);\r\n\r\n  return (\r\n    <div className=\"node-options\">\r\n      <p>Id: {nodeState.id}</p>\r\n      <label htmlFor=\"text\">Name:</label>\r\n      <input value={nodeState.text} name=\"text\" onChange={handleChange} />\r\n      <h5>Edges:</h5>\r\n      {selected.edges.length > 0 ? (\r\n        <ul>\r\n          {selected.edges.map((edge) => (\r\n            <li key={edge.nodeId}>With {edge.nodeId}</li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>No edges for this node</p>\r\n      )}\r\n      {otherNodes.length > 0 ? (\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            updateNode({\r\n              [e.target.getElementsByTagName(\"select\")[0].name]:\r\n                e.target.getElementsByTagName(\"select\")[0].value,\r\n            });\r\n          }}\r\n        >\r\n          <label htmlFor=\"edge\">Add edge: </label>\r\n          <select name=\"edge\">\r\n            {otherNodes.map((node) => (\r\n              <option key={node} value={node}>\r\n                {node}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <button type=\"submit\">Add Edge</button>\r\n        </form>\r\n      ) : (\r\n        <p>No node available for an edge</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NodeOptions;\r\n","import React from \"react\";\r\nimport CanvasStore from \"../../../../stores/canvasStore\";\r\nimport { SidebarEl } from \"../../elements\";\r\nimport NodeOptions from \"./components/nodeOptions\";\r\n\r\nfunction Sidebar() {\r\n  const { selected } = CanvasStore.useContainer();\r\n\r\n  return (\r\n    <SidebarEl>\r\n      {selected\r\n        ? (() => {\r\n            switch (selected.type) {\r\n              case \"node\":\r\n                return <NodeOptions />;\r\n              default:\r\n                return <div>Error</div>;\r\n            }\r\n          })()\r\n        : \"Select an object to view its properties\"}\r\n    </SidebarEl>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","import React from \"react\";\r\nimport Canvas from \"./components/canvas\";\r\nimport Sidebar from \"./components/sidebar\";\r\nimport { ContentEl } from \"./elements\";\r\n\r\nfunction Content() {\r\n  return (\r\n    <ContentEl>\r\n      <Sidebar />\r\n      <Canvas />\r\n    </ContentEl>\r\n  );\r\n}\r\n\r\nexport default Content;\r\n","import styled from \"styled-components\";\r\nimport { hFlex } from \"../../../elements/helpers\";\r\n\r\nexport const NavbarEl = styled.div`\r\n  ${hFlex}\r\n  box-sizing: border-box;\r\n  padding: 1em;\r\n  width: 100%;\r\n  justify-content: flex-start;\r\n`;\r\n","import React from \"react\";\r\nimport CanvasStore from \"../../stores/canvasStore\";\r\nimport { NavbarEl } from \"./elements/index\";\r\n\r\nfunction Navbar() {\r\n  const { isCanvasActive, addNode } = CanvasStore.useContainer();\r\n  return (\r\n    <NavbarEl>\r\n      <button\r\n        onClick={() =>\r\n          isCanvasActive ? addNode() : console.log(\"Canvas not loaded\")\r\n        }\r\n        className=\"sidebar-btn\"\r\n        disabled={!isCanvasActive}\r\n      >\r\n        Add Node\r\n      </button>\r\n    </NavbarEl>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\nimport { AppEl } from \"../elements/app\";\r\nimport CanvasStore from \"../stores/canvasStore\";\r\nimport { withStore } from \"../utils/withStore\";\r\nimport Content from \"./content\";\r\nimport Navbar from \"./navbar\";\r\n\r\nfunction App() {\r\n  return (\r\n    <AppEl>\r\n      <Navbar />\r\n      <Content />\r\n    </AppEl>\r\n  );\r\n}\r\n\r\nexport default withStore([CanvasStore])(App);\r\n","import React from \"react\";\r\n\r\nexport const withStore =\r\n  (stores = []) =>\r\n  (WrappedComponent) =>\r\n  (props) =>\r\n    stores.reduce(\r\n      (component, Store) => <Store.Provider>{component}</Store.Provider>,\r\n      <WrappedComponent {...props} />\r\n    );\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}