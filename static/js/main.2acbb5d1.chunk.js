(this.webpackJsonpmtp=this.webpackJsonpmtp||[]).push([[0],{21:function(e,t,n){},29:function(e,t){},30:function(e,t){},31:function(e,t){},33:function(e,t,n){"use strict";n.r(t);var i,c,r,o,a,s,d,u,l=n(0),b=n.n(l),j=n(12),f=n.n(j),h=(n(21),n(2)),O=n(3),g=Object(O.a)(i||(i=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),v=Object(O.a)(c||(c=Object(h.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]))),p=(Object(O.a)(r||(r=Object(h.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),Object(O.a)(o||(o=Object(h.a)(["\n  position: absolute;\n  top: 50%;\n  transform: translate(0%, -50%);\n"]))),Object(O.a)(a||(a=Object(h.a)(["\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n"]))),Object(O.a)(s||(s=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),Object(O.a)(d||(d=Object(h.a)(["\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),O.b.div(u||(u=Object(h.a)(["\n  ","\n  align-items: flex-start;\n  height: 100%;\n  width: 100%;\n"])),g)),x=n(4),m=n(6),w=n(16),C=n(5);C.fabric.Object.prototype.originX=C.fabric.Object.prototype.originY="center",C.fabric.LineArrow=C.fabric.util.createClass(C.fabric.Line,{type:"lineArrow",initialize:function(e,t){t||(t={}),this.callSuper("initialize",e,t)},toObject:function(){return C.fabric.util.object.extend(this.callSuper("toObject"))},_render:function(e){if(this.callSuper("_render",e),0!==this.width&&0!==this.height&&this.visible){e.save();var t=this.x2-this.x1,n=this.y2-this.y1,i=Math.atan2(n,t),c=Math.sqrt(3)/2*this.strokeWidth,r=this.x2+this.destCurve.a/2*Math.cos(i),o=this.y2+this.destCurve.b/2*Math.sin(i),a=Math.sqrt(Math.pow(r-this.x2,2)+Math.pow(o-this.y2,2));e.translate(t/2,n/2),e.rotate(i),e.beginPath(),e.moveTo(c-a,0),e.lineTo(-3*c-a,2.5*c),e.lineTo(-3*c-a,-2.5*c),e.closePath(),e.fillStyle=this.stroke,e.fill(),e.restore()}}}),C.fabric.LineArrow.fromObject=function(e,t){t&&t(new C.fabric.LineArrow([e.x1,e.y1,e.x2,e.y2],e))},C.fabric.LineArrow.async=!0;var y,S,A,k=C.fabric,E={nodeCount:0},N=function(e,t){var n=t.edge,i=e.getActiveObject(),c=e.getObjects().find((function(e){return e.id===n}));return new k.LineArrow([i.left,i.top,c.left,c.top],{fill:"red",stroke:"red",strokeWidth:5,selectable:!1,evented:!1,destCurve:{a:c.width,b:c.height}})},T=function(e){e.edges.forEach((function(t){return t.line.set({x1:e.left,y1:e.top})})),e.incomingEdges.forEach((function(t){return t.line.set({x2:e.left,y2:e.top})}))},I=function(e,t){var n=t.id,i=t.title,c=new k.Circle({radius:30,fill:"gray",originX:"center",originY:"center"}),r=new k.Text(i.toString(),{fontSize:20,originX:"center",originY:"center"}),o=new k.Group([c,r],{left:150,top:150,type:"node",id:n,text:i,edges:[],incomingEdges:[],controls:!1});return o.on("selected",(function(t){e.fire("custom:update",t.target)})).on("deselected",(function(t){e.fire("custom:deselection",t.target)})).on("scaling",(function(t){e.fire("custom:update",t.target)})).on("moving",(function(t){e.fire("node:moving",t.transform.target)})),o},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(null===t||void 0===t?void 0:t.node)||e.getActiveObject();switch(Object.keys(t)[0]){case"text":return n.item(1).set(t),void n.set(t);case"move":return T(n),void e.renderAll();case"edge":var i=N(e,t);n.edges.push({nodeId:t.edge,line:i});var c=e.getObjects().find((function(e){return e.id===t.edge}));return c.incomingEdges.push({nodeId:n.id,line:i}),e.fire("custom:update",n),void e.add(i).sendToBack(i).renderAll();default:return void console.log("tf u doing")}},M=Object(w.a)((function(){var e=Object(l.useState)(null),t=Object(m.a)(e,2),n=t[0],i=t[1],c=Object(l.useState)(null),r=Object(m.a)(c,2),o=r[0],a=r[1],s=Object(l.useState)(E),d=Object(m.a)(s,2),u=d[0],b=d[1],j=Object(l.useCallback)((function(e,t,n){if(e){var c=new k.Canvas(t,n);c.on("custom:update",(function(e){return a((function(t){return t?Object(x.a)(Object(x.a)({},t),e):e}))})),c.on("custom:deselection",(function(){return a(null)})),c.on("node:moving",(function(e){return L(c,{move:!0,node:e})})),i(c)}}),[]),f=Object(l.useCallback)((function(){n.dispose()}),[n]),h=Object(l.useCallback)((function(){if(n){var e=I(n,{id:"node-".concat(u.nodeCount+1),title:u.nodeCount+1});n.add(e).setActiveObject(e),b(Object(x.a)(Object(x.a)({},u),{},{nodeCount:u.nodeCount+1}))}}),[n,u,b]),O=Object(l.useCallback)((function(e){n&&(L(n,e),n.renderAll())}),[n]),g=Object(l.useCallback)((function(e){return console.log(e)}),[]);return{canvas:n,initCanvas:j,resetCanvas:f,isCanvasActive:!!n,addNode:h,selected:o,canvasState:u,setCanvasState:b,updateNode:O,addEdge:g}})),F=n(1),B=O.b.div(y||(y=Object(h.a)(["\n  ","\n  width: 100%;\n  justify-content: flex-start;\n  height: 100%;\n"])),v),P=O.b.div(S||(S=Object(h.a)(["\n  width: 75%;\n  height: 100%;\n"]))),z=O.b.div(A||(A=Object(h.a)(["\n  ","\n  width: 25%;\n  height: 100%;\n  justify-content: flex-start;\n"])),g);var W=function(){var e=Object(l.useRef)(null),t=Object(l.useRef)(null),n=M.useContainer().initCanvas;return Object(l.useEffect)((function(){t.current&&n(t,"main-canvas",{width:e.current.clientWidth,height:e.current.clientHeight,backgroundColor:"lightgray",preserveObjectStacking:!0})}),[n]),Object(F.jsx)(P,{ref:e,children:Object(F.jsx)("canvas",{id:"main-canvas",ref:t})})},X=n(7);var Y=function(){var e=M.useContainer(),t=e.canvas,n=e.updateNode,i=e.selected,c=Object(l.useState)(i),r=Object(m.a)(c,2),o=r[0],a=r[1],s=Object(l.useState)([]),d=Object(m.a)(s,2),u=d[0],b=d[1];return Object(l.useEffect)((function(){a((function(e){return Object(x.a)(Object(x.a)({},e),i)}))}),[i]),Object(l.useEffect)((function(){b(t.getObjects().filter((function(e){var t=e.id;return"node"===e.type&&t!==i.id&&!i.edges.find((function(e){return e.nodeId===t}))})).map((function(e){return e.id})))}),[b,i,t]),Object(F.jsxs)("div",{className:"node-options",children:[Object(F.jsxs)("p",{children:["Id: ",o.id]}),Object(F.jsx)("label",{htmlFor:"text",children:"Name:"}),Object(F.jsx)("input",{value:o.text,name:"text",onChange:function(e){var t=Object(X.a)({},e.target.name,e.target.value);a((function(e){return Object(x.a)(Object(x.a)({},e),t)})),n(t)}}),Object(F.jsx)("h5",{children:"Edges:"}),i.edges.length>0?Object(F.jsx)("ul",{children:i.edges.map((function(e){return Object(F.jsxs)("li",{children:["With ",e.nodeId]},e.nodeId)}))}):Object(F.jsx)("p",{children:"No edges for this node"}),u.length>0?Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(Object(X.a)({},e.target.getElementsByTagName("select")[0].name,e.target.getElementsByTagName("select")[0].value))},children:[Object(F.jsx)("label",{htmlFor:"edge",children:"Add edge: "}),Object(F.jsx)("select",{name:"edge",children:u.map((function(e){return Object(F.jsx)("option",{value:e,children:e},e)}))}),Object(F.jsx)("button",{type:"submit",children:"Add Edge"})]}):Object(F.jsx)("p",{children:"No node available for an edge"})]})};var q=function(){var e=M.useContainer().selected;return Object(F.jsx)(z,{children:e?function(){switch(e.type){case"node":return Object(F.jsx)(Y,{});default:return Object(F.jsx)("div",{children:"Error"})}}():"Select an object to view its properties"})};var D,J=function(){return Object(F.jsxs)(B,{children:[Object(F.jsx)(q,{}),Object(F.jsx)(W,{})]})},R=O.b.div(D||(D=Object(h.a)(["\n  ","\n  box-sizing: border-box;\n  padding: 1em;\n  width: 100%;\n  justify-content: flex-start;\n"])),v);var _=function(){var e=M.useContainer(),t=e.isCanvasActive,n=e.addNode;return Object(F.jsx)(R,{children:Object(F.jsx)("button",{onClick:function(){return t?n():console.log("Canvas not loaded")},className:"sidebar-btn",disabled:!t,children:"Add Node"})})};var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return function(n){return e.reduce((function(e,t){return Object(F.jsx)(t.Provider,{children:e})}),Object(F.jsx)(t,Object(x.a)({},n)))}}}([M])((function(){return Object(F.jsxs)(p,{children:[Object(F.jsx)(_,{}),Object(F.jsx)(J,{})]})})),H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),c(e),r(e),o(e)}))};f.a.render(Object(F.jsx)(b.a.StrictMode,{children:Object(F.jsx)(G,{})}),document.getElementById("root")),H()}},[[33,1,2]]]);
//# sourceMappingURL=main.2acbb5d1.chunk.js.map