(this.webpackJsonpmtp=this.webpackJsonpmtp||[]).push([[0],{26:function(e,t,n){},34:function(e,t){},35:function(e,t){},36:function(e,t){},38:function(e,t,n){"use strict";n.r(t);var r,i,c,o,a,s,u,d,l=n(1),f=n.n(l),b=n(15),h=n.n(b),j=(n(26),n(2)),p=n(3),g=Object(p.a)(r||(r=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),v=Object(p.a)(i||(i=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]))),O=(Object(p.a)(c||(c=Object(j.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),Object(p.a)(o||(o=Object(j.a)(["\n  position: absolute;\n  top: 50%;\n  transform: translate(0%, -50%);\n"]))),Object(p.a)(a||(a=Object(j.a)(["\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n"]))),Object(p.a)(s||(s=Object(j.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),Object(p.a)(u||(u=Object(j.a)(["\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),p.b.div(d||(d=Object(j.a)(["\n  ","\n  align-items: flex-start;\n  height: 100%;\n  width: 100%;\n"])),g)),m=n(11),x=n(4),y=n(5),E=n(21),C=n(6);C.fabric.Object.prototype.originX=C.fabric.Object.prototype.originY="center",C.fabric.LineArrow=C.fabric.util.createClass(C.fabric.Line,{type:"lineArrow",initialize:function(e,t){t||(t={}),this.callSuper("initialize",e,t)},toObject:function(){return C.fabric.util.object.extend(this.callSuper("toObject"))},_render:function(e){if(this.callSuper("_render",e),0!==this.width&&0!==this.height&&this.visible){e.save();var t=this.x2-this.x1,n=this.y2-this.y1,r=Math.atan2(n,t),i=Math.sqrt(3)/2*this.strokeWidth,c=this.x2+this.destCurve.a/2*Math.cos(r),o=this.y2+this.destCurve.b/2*Math.sin(r),a=Math.sqrt(Math.pow(c-this.x2,2)+Math.pow(o-this.y2,2));e.translate(t/2,n/2),e.rotate(r),e.beginPath(),e.moveTo(i-a,0),e.lineTo(-3*i-a,2.5*i),e.lineTo(-3*i-a,-2.5*i),e.closePath(),e.fillStyle=this.stroke,e.fill(),e.restore()}}}),C.fabric.LineArrow.fromObject=function(e,t){t&&t(new C.fabric.LineArrow([e.x1,e.y1,e.x2,e.y2],e))},C.fabric.LineArrow.async=!0;var w,A,D,k,I,S=C.fabric,T="Undirected",N={radius:20},F={nodeCount:0},M={UNDIRECTED_EDGE:T,DIRECTED_EDGE:"Directed"},R="#808080",G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(Math.random()*(t-e+1)+e)},_=function(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.id;return t?parseInt(t.match(/[^-]*$/g)[0]):(console.error("Invalid node"),-1)},L=function(e,t){var n=t.edge,r=t.node,i=t.type,c=r,o=e.getObjects().find((function(e){return e.id===n})),a={fill:"red",stroke:"red",strokeWidth:5,selectable:!1,type:i,evented:!1,destCurve:{a:o.width,b:o.height}};return i===M.DIRECTED_EDGE?new S.LineArrow([c.left,c.top,o.left,o.top],a):new S.Line([c.left,c.top,o.left,o.top],a)},B=function(e){e.edges.forEach((function(t){return t.line.set({x1:e.left,y1:e.top})})),e.incomingEdges.forEach((function(t){return t.line.set({x2:e.left,y2:e.top})}))},J=function(e,t){var n=t.id,r=t.title,i=e.vptCoords.br,c=new S.Circle({radius:30,fill:R,originX:"center",originY:"center"}),o=new S.Text(r.toString(),{fontSize:20,originX:"center",originY:"center"}),a=new S.Group([c,o],{left:G(30,i.x-30),top:G(30,i.y-30),type:"node",id:n,text:r,edges:[],incomingEdges:[],controls:!1});return a.on("selected",(function(t){e.fire("custom:update",t.target),e.fire("node:selection",t.target)})).on("deselected",(function(t){e.fire("node:deselection",t.target),e.fire("custom:deselection",t.target)})).on("scaling",(function(t){e.fire("custom:update",t.target)})).on("moving",(function(t){e.fire("node:moving",t.transform.target)})),a},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(null===t||void 0===t?void 0:t.node)||e.getActiveObject();switch(Object.keys(t)[0]){case"text":return n.item(1).set(t),void n.set(t);case"move":return B(n),void e.renderAll();case"edge":var r=L(e,t);n.edges.push({nodeId:t.edge,type:t.type,line:r});var i=e.getObjects().find((function(e){return e.id===t.edge}));return i.incomingEdges.push({nodeId:n.id,type:t.type,line:r}),e.fire("custom:update",n),void e.add(r).sendToBack(r).renderAll();case"selected":return n.item(0).set({fill:t.selected?"red":R}),void e.renderAll();default:return void console.log("tf u doing")}},P=n(19),z=n(20),q=function(){function e(){Object(P.a)(this,e),this.items=[]}return Object(z.a)(e,[{key:"push",value:function(e){this.items.push(e)}},{key:"pop",value:function(){return 0===this.items.length?(console.error("ERROR: stack empty"),null):this.items.pop()}},{key:"top",value:function(){return 0===this.items.length?(console.error("ERROR: stack empty"),null):this.items.slice(-1)[0]}},{key:"isEmpty",value:function(){return 0===this.items.length}},{key:"print",value:function(){var e="";return this.items.forEach((function(t){return e+=t+" "})),e.trim()}},{key:"size",value:function(){return this.items.length}}]),e}(),W=function(e){var t=function(e){var t=e.getObjects("node").length,n=Object(m.a)(Array(t)).map((function(e){return Array(t).fill(0)}));return e.getObjects("node").forEach((function(e){var t=_(e)-1;e.edges.forEach((function(e){var r=e.type,i=e.nodeId,c=_(i)-1;n[t][c]=1,r===T&&(n[c][t]=1)}))})),n}(e),n=new q,r=new Array(t.length).fill(-1),i=new Array(t.length),c=[];return r.forEach((function(e,o){-1===e&&function(){n.push(o);var e=[o];r[o]=i[o]=0;for(var a=function(){var o=n.pop();t[o].forEach((function(a,s){Boolean(a)&&(-1===e.indexOf(s)?(i[s]=o,r[s]=r[o]+1,e.push(s),n.push(s)):c.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if("number"!==typeof t||"number"!==typeof n)return console.error("Expected a number value for current node."),[];for(var r=[],i=t;i!==e[n];)r.push(i+1),i=e[i];return r.push(e[n]+1),r.push(n+1),r}(i,o,s)),t[o][s]=t[s][o]=0)}))};!n.isEmpty();)a()}()})),c},X=Object(E.a)((function(){var e=Object(l.useState)(null),t=Object(y.a)(e,2),n=t[0],r=t[1],i=Object(l.useState)(null),c=Object(y.a)(i,2),o=c[0],a=c[1],s=Object(l.useState)(F),u=Object(y.a)(s,2),d=u[0],f=u[1],b=Object(l.useCallback)((function(e,t,n){if(e){var i=new S.Canvas(t,n);i.on("custom:update",(function(e){return a((function(t){return t?Object(x.a)(Object(x.a)({},t),e):e}))})),i.on("node:selection",(function(e){return U(i,{selected:!0,node:e})})),i.on("custom:deselection",(function(){return a(null)})),i.on("node:deselection",(function(e){return U(i,{selected:!1,node:e})})),i.on("node:moving",(function(e){return U(i,{move:!0,node:e})})),r(i)}}),[]),h=Object(l.useCallback)((function(){n.dispose()}),[n]),j=Object(l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;if(n){var t=J(n,{id:"node-".concat(d.nodeCount+1),title:(null===e||void 0===e?void 0:e.title)||d.nodeCount+1});n.add(t).setActiveObject(t),f(Object(x.a)(Object(x.a)({},d),{},{nodeCount:d.nodeCount+1}))}}),[n,d,f]),p=Object(l.useCallback)((function(e){n&&(U(n,e),n.renderAll())}),[n]),g=Object(l.useCallback)((function(e,t){p({edge:t,node:e,type:M.DIRECTED_EDGE})}),[p]),v=Object(l.useCallback)((function(e,t){p({edge:t,node:e,type:M.UNDIRECTED_EDGE})}),[p]),O=Object(l.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("ADJMAT"===e){var r=n.getObjects("node").length,i=[];Object(m.a)(Array(t.length)).forEach((function(e,t){var c=J(n,{id:"node-".concat(r+t+1),title:r+t+1});n.add(c),i.push(c)})),f((function(e){return Object(x.a)(Object(x.a)({},e),{},{nodeCount:(null===e||void 0===e?void 0:e.nodeCount)?(null===e||void 0===e?void 0:e.nodeCount)+t.length:t.length})})),t.forEach((function(e,t){var n=i[t];e.forEach((function(e,r){"0"!==e&&t!==r&&g(n,i[r].id)}))})),a(null)}else console.log("Jld hi")}),[n,g]),E=Object(l.useCallback)((function(){return W(n)}),[n]);return{canvas:n,initCanvas:b,resetCanvas:h,isCanvasActive:!!n,addNode:j,selected:o,canvasState:d,setCanvasState:f,updateNode:p,addDirectedEdge:g,setSelected:a,addGraph:O,addUndirectedEdge:v,getFundamentalMatrix:E}})),Y=n(0),H=p.b.div(w||(w=Object(j.a)(["\n  ","\n  width: 100%;\n  justify-content: flex-start;\n  height: 100%;\n"])),v),$=p.b.div(A||(A=Object(j.a)(["\n  width: 75%;\n  height: 100%;\n"]))),K=p.b.div(D||(D=Object(j.a)(["\n  ","\n  width: 25%;\n  height: 100%;\n  justify-content: flex-start;\n"])),g),Q=p.b.div(k||(k=Object(j.a)([""]))),V=p.b.div(I||(I=Object(j.a)([""])));var Z=function(){var e=Object(l.useRef)(null),t=Object(l.useRef)(null),n=X.useContainer().initCanvas;return Object(l.useEffect)((function(){t.current&&n(t,"main-canvas",{width:e.current.clientWidth,height:e.current.clientHeight,backgroundColor:"#F2F2F2",preserveObjectStacking:!0})}),[n]),Object(Y.jsx)($,{ref:e,children:Object(Y.jsx)("canvas",{id:"main-canvas",ref:t})})};var ee=function(){var e=Object(l.useState)(""),t=Object(y.a)(e,2),n=t[0],r=t[1],i=Object(l.useState)("ADJMAT"),c=Object(y.a)(i,2),o=c[0],a=c[1],s=X.useContainer().addGraph;return Object(Y.jsxs)(Q,{children:[Object(Y.jsx)("h3",{children:"Add a graph"}),Object(Y.jsxs)("form",{children:[Object(Y.jsx)("p",{children:"Graph Input Type"}),Object(Y.jsxs)("div",{className:"graph-input-select",onChange:function(e){r(""),a(e.target.value)},children:[Object(Y.jsx)("input",{type:"radio",defaultChecked:!0,id:"graph-option-adj-mat",name:"graph-input-type",value:"ADJMAT"}),Object(Y.jsx)("label",{htmlFor:"graph-option-adj-mat",children:"Adjacency Matrix"}),Object(Y.jsx)("input",{type:"radio",id:"graph-option-edges",name:"graph-input-type",value:"EDGE"}),Object(Y.jsx)("label",{htmlFor:"graph-option-edges",children:"Edges"})]}),Object(Y.jsx)("textarea",{rows:"4",name:"graph-input",value:n,onChange:function(e){r(e.target.value)}}),Object(Y.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var t=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t={message:"all good",status:"true"};if("ADJMAT"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ADJMAT")){var n=e.replace(/\n+/g,"\n").trim().split("\n").map((function(e){return e.replace(/\s+/g," ").trim().split(" ")}));if(n.every((function(e,r){return e.length===n.length||(t={message:"Please input a square matrix. Row ".concat(r+1," of invalid size"),status:!1},!1)})),!t.status)return t;t={status:!0,message:n}}return t}(o,n);t.status?(s(o,t.message),r("")):alert(t.message)},children:"Add"})]})]})};var te=function(){var e,t=X.useContainer().getFundamentalMatrix,n=Object(l.useState)(!0),r=Object(y.a)(n,2),i=r[0],c=r[1],o=Object(l.useRef)(null);return Object(l.useEffect)((function(){o.current=t(),c(!1)}),[c,t]),Object(Y.jsx)(V,{children:i?"loading...":Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("h3",{children:"Fundamental Circuits:"}),Object(Y.jsx)("ul",{children:(null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.length)&&o.current.map((function(e,t){return Object(Y.jsx)("li",{children:e.map((function(e){return e+" "}))},"fundamental-".concat(t))}))})]})})},ne=n(10);var re=function(){var e=X.useContainer(),t=e.canvas,n=e.updateNode,r=e.selected,i=e.addUndirectedEdge,c=Object(l.useState)(r),o=Object(y.a)(c,2),a=o[0],s=o[1],u=Object(l.useState)([]),d=Object(y.a)(u,2),f=d[0],b=d[1];return Object(l.useEffect)((function(){s((function(e){return Object(x.a)(Object(x.a)({},e),r)}))}),[r]),Object(l.useEffect)((function(){b(t.getObjects().filter((function(e){var t=e.id;return"node"===e.type&&t!==r.id&&!r.edges.find((function(e){return e.nodeId===t}))&&!r.incomingEdges.find((function(e){var n=e.nodeId;return e.type===M.UNDIRECTED_EDGE&&n===t}))})).map((function(e){return e.id})))}),[b,r,t]),Object(Y.jsxs)("div",{className:"node-options",children:[Object(Y.jsxs)("p",{children:["Id: ",a.id]}),Object(Y.jsx)("label",{htmlFor:"text",children:"Name:"}),Object(Y.jsx)("input",{value:a.text,name:"text",onChange:function(e){var t=Object(ne.a)({},e.target.name,e.target.value);s((function(e){return Object(x.a)(Object(x.a)({},e),t)})),n(t)}}),Object(Y.jsx)("h5",{children:"Edges:"}),r.edges.length>0||r.incomingEdges.filter((function(e){return e.type===M.UNDIRECTED_EDGE})).length>0?Object(Y.jsxs)("ul",{children:[r.edges.map((function(e){return Object(Y.jsxs)("li",{children:[e.type," edge with ",e.nodeId]},e.nodeId)})),r.incomingEdges.map((function(e){return e.type===M.UNDIRECTED_EDGE&&Object(Y.jsxs)("li",{children:[e.type," edge with ",e.nodeId]},e.nodeId)}))]}):Object(Y.jsx)("p",{children:"No edges for this node"}),f.length>0?Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(r,e.target.getElementsByTagName("select")[0].value)},children:[Object(Y.jsx)("label",{htmlFor:"edge",children:"Add edge: "}),Object(Y.jsx)("select",{name:"edge",children:f.map((function(e){return Object(Y.jsx)("option",{value:e,children:e},e)}))}),Object(Y.jsx)("button",{type:"submit",children:"Add Edge"})]}):Object(Y.jsx)("p",{children:"No node available for an edge"})]})};var ie=function(){var e=X.useContainer().selected;return Object(Y.jsx)(K,{children:e?function(){switch(e.type){case"node":return Object(Y.jsx)(re,{});case"graph":return Object(Y.jsx)(ee,{});case"graph-properties":return Object(Y.jsx)(te,{});default:return Object(Y.jsx)("div",{children:"Error"})}}():"Select an object to view its properties"})};var ce,oe=function(){return Object(Y.jsxs)(H,{children:[Object(Y.jsx)(ie,{}),Object(Y.jsx)(Z,{})]})},ae=p.b.div(ce||(ce=Object(j.a)(["\n  ","\n  box-sizing: border-box;\n  padding: 1em;\n  width: 100%;\n  justify-content: flex-start;\n  border-bottom: 1px solid ",";\n"])),v,"#BFBFBF");var se=function(){var e=X.useContainer(),t=e.isCanvasActive,n=e.addNode,r=e.setSelected;return Object(Y.jsxs)(ae,{children:[Object(Y.jsx)("button",{onClick:function(){return t?n():console.log("Canvas not loaded")},className:"navbar-btn",disabled:!t,children:"Add Node"}),Object(Y.jsx)("button",{onClick:function(){return t?r({type:"graph"}):console.log("Canvas not loaded")},className:"navbar-btn",disabled:!t,children:"Add Graph"}),Object(Y.jsx)("button",{onClick:function(){return r({type:"graph-properties"})},className:"navbar-btn",children:"Process graph"})]})};var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return function(n){return e.reduce((function(e,t){return Object(Y.jsx)(t.Provider,{children:e})}),Object(Y.jsx)(t,Object(x.a)({},n)))}}}([X])((function(){return Object(Y.jsxs)(O,{children:[Object(Y.jsx)(se,{}),Object(Y.jsx)(oe,{})]})})),de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),c(e),o(e)}))};h.a.render(Object(Y.jsx)(f.a.StrictMode,{children:Object(Y.jsx)(ue,{})}),document.getElementById("root")),de()}},[[38,1,2]]]);
//# sourceMappingURL=main.8fe17c2a.chunk.js.map