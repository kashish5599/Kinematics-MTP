(this.webpackJsonpmtp=this.webpackJsonpmtp||[]).push([[0],{28:function(e,t,n){},36:function(e,t){},37:function(e,t){},38:function(e,t){},40:function(e,t){String.prototype.replaceAt=function(e,t){return this.substring(0,e)+t+this.substring(e+t.length)},String.prototype.bitAND=function(e){return(parseInt(this,2)&parseInt(e,2)).toString(2)},String.prototype.bitOR=function(e){return(parseInt(this,2)|parseInt(e,2)).toString(2)},String.prototype.bitXOR=function(e){return(parseInt(this,2)^parseInt(e,2)).toString(2)}},41:function(e,t,n){"use strict";n.r(t);var r,c,i,a,o,s,u,d,l=n(1),f=n.n(l),b=n(16),j=n.n(b),h=(n(28),n(2)),g=n(3),v=Object(g.a)(r||(r=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),O=Object(g.a)(c||(c=Object(h.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]))),p=(Object(g.a)(i||(i=Object(h.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),Object(g.a)(a||(a=Object(h.a)(["\n  position: absolute;\n  top: 50%;\n  transform: translate(0%, -50%);\n"]))),Object(g.a)(o||(o=Object(h.a)(["\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n"]))),Object(g.a)(s||(s=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),Object(g.a)(u||(u=Object(h.a)(["\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),g.b.div(d||(d=Object(h.a)(["\n  ","\n  align-items: flex-start;\n  height: 100%;\n  width: 100%;\n"])),v)),x=n(11),m=n(7),y=n(5),C=n(4),E=n(23),w=n(6);w.fabric.Object.prototype.originX=w.fabric.Object.prototype.originY="center",w.fabric.LineArrow=w.fabric.util.createClass(w.fabric.Line,{type:"lineArrow",initialize:function(e,t){t||(t={}),this.callSuper("initialize",e,t)},toObject:function(){return w.fabric.util.object.extend(this.callSuper("toObject"))},_render:function(e){if(this.callSuper("_render",e),0!==this.width&&0!==this.height&&this.visible){e.save();var t=this.x2-this.x1,n=this.y2-this.y1,r=Math.atan2(n,t),c=Math.sqrt(3)/2*this.strokeWidth,i=this.x2+this.destCurve.a/2*Math.cos(r),a=this.y2+this.destCurve.b/2*Math.sin(r),o=Math.sqrt(Math.pow(i-this.x2,2)+Math.pow(a-this.y2,2));e.translate(t/2,n/2),e.rotate(r),e.beginPath(),e.moveTo(c-o,0),e.lineTo(-3*c-o,2.5*c),e.lineTo(-3*c-o,-2.5*c),e.closePath(),e.fillStyle=this.stroke,e.fill(),e.restore()}}}),w.fabric.LineArrow.fromObject=function(e,t){t&&t(new w.fabric.LineArrow([e.x1,e.y1,e.x2,e.y2],e))},w.fabric.LineArrow.async=!0;var A=w.fabric,k="Undirected",M="Directed",N={radius:20},S=n(15),F="#808080",R=(n(20),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(Math.random()*(t-e+1)+e)}),T=function(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.id;return t?parseInt(t.match(/[^-]*$/g)[0]):(console.error("Invalid node"),-1)},G=function(e,t){return e.getObjects("node").find((function(e){return e.id==="node-".concat(t)}))};var I,D,P,L,q,_,B=function(e){var t=e.x1,n=e.x2,r=e.y1,c=e.y2,i=e.source,a=e.target,o=T(i),s=T(a),u=180*Math.atan((r-c)/(n-t))/Math.PI;return n-t<0?u+=180:r-c<0&&(u+=360),{title:"".concat(o,"-").concat(s),value:u}},J=function(e,t,n){var r="".concat(t,"-").concat(n),c="".concat(n,"-").concat(t),i=e.edgeNodeMap[r]||e.edgeNodeMap[c];return e.getObjects(k).find((function(e){return e.id==="edge-".concat(i)}))},z=function(e){var t=e.x1,n=e.x2,r=e.y1,c=e.y2;return Math.sqrt(Math.pow(t-n,2)+Math.pow(r-c,2))},Y=n(21),H=n(22),X=function(){function e(){Object(Y.a)(this,e),this.items=[]}return Object(H.a)(e,[{key:"push",value:function(e){this.items.push(e)}},{key:"pop",value:function(){return 0===this.items.length?(console.error("ERROR: stack empty"),null):this.items.pop()}},{key:"top",value:function(){return 0===this.items.length?(console.error("ERROR: stack empty"),null):this.items.slice(-1)[0]}},{key:"isEmpty",value:function(){return 0===this.items.length}},{key:"print",value:function(){var e="";return this.items.forEach((function(t){return e+=t+" "})),e.trim()}},{key:"size",value:function(){return this.items.length}}]),e}(),V=function(e){var t=function(e){var t=e.getObjects("node").length,n=Object(x.a)(Array(t)).map((function(e){return Array(t).fill(0)}));return Object.entries(e.edgeNodeMap).forEach((function(e){var t=Object(C.a)(e,1)[0].split("-");n[t[0]-1][t[1]-1]=n[t[1]-1][t[0]-1]=1})),n}(e),n=new X,r=new Array(t.length).fill(-1),c=new Array(t.length),i=[];return r.forEach((function(e,a){-1===e&&function(){n.push(a);var e=[a];r[a]=c[a]=0;for(var o=function(){var a=n.pop();t[a].forEach((function(o,s){Boolean(o)&&(-1===e.indexOf(s)?(c[s]=a,r[s]=r[a]+1,e.push(s),n.push(s)):i.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if("number"!==typeof t||"number"!==typeof n)return console.error("Expected a number value for current node."),[];for(var r=[],c=t;c!==e[n];)r.push(c+1),c=e[c];return r.push(e[n]+1),r.push(n+1),r}(c,a,s)),t[a][s]=t[s][a]=0)}))};!n.isEmpty();)o()}()})),i},W=["canvas"],U=["id"],$=function(e,t){var n=t.id,r=t.title,c=e.vptCoords.br,i=new A.Circle({radius:30,fill:F,originX:"center",originY:"center"}),a=new A.Text(r.toString(),{fontSize:20,originX:"center",originY:"center"}),o=new A.Group([i,a],{left:R(30,c.x-30),top:R(30,c.y-30),type:"node",id:n,text:r,edges:[],incomingEdges:[],isGrounded:!1,controls:!1});return o.on("selected",(function(t){e.fire("custom:update",t.target),e.fire("node:selection",t.target)})).on("deselected",(function(t){e.fire("node:deselection",t.target),e.fire("custom:deselection",t.target)})).on("scaling",(function(t){e.fire("custom:update",t.target)})).on("moving",(function(t){e.fire("node:moving",t.transform.target)})),o},K=function(e,t){var n=t.canvas,r=Object(S.a)(t,W),c=(null===r||void 0===r?void 0:r.node)||n.getActiveObject();switch(e){case"PROPERTY_CHANGE":return c.item(1).set(r),void c.set(r);case"MOVE":return function(e,t){var n=t.id,r=t.left,c=t.top;t.edges.forEach((function(t){var i=e.getObjects().find((function(e){return e.id===t}));i.source===n?i.set({x1:r,y1:c}):i.set({x2:r,y2:c})}))}(n,c),void n.renderAll();case"ADD_EDGE":var i=function(e,t){var n=t.target,r=t.source,c=t.type,i=t.title,a=t.id,o=e.getObjects().find((function(e){return e.id===r})),s=e.getObjects().find((function(e){return e.id===n})),u={id:a,fill:"red",stroke:"red",strokeWidth:5,selectable:!1,type:c,eangle:{},evented:!1,destCurve:{a:s.width,b:s.height},text:i,target:n,source:r};return c===M?new A.LineArrow([o.left,o.top,s.left,s.top],u):new A.Line([o.left,o.top,s.left,s.top],u)}(n,r);return n.getObjects("node").forEach((function(e){var t=e.id,n=Object(S.a)(e,U);t!==r.target&&t!==r.source||n.edges.push(i.id)})),n.add(i).sendToBack(i).renderAll(),void n.fire("custom:update",c);case"SELECTION":return c.item(0).set({fill:r.selected?"red":F}),void n.renderAll();default:return void console.log("tf u doing")}},Q=Object(E.a)((function(){var e=Object(l.useState)(null),t=Object(C.a)(e,2),n=t[0],r=t[1],c=Object(l.useState)(null),i=Object(C.a)(c,2),a=i[0],o=i[1],s=Object(l.useCallback)((function(e,t,n){if(e){var c=new A.Canvas(t,n);c.on("custom:update",(function(e){return o((function(t){return t?Object(y.a)(Object(y.a)({},t),e):e}))})),c.on("node:selection",(function(e){return K("SELECTION",{canvas:c,selected:!0,node:e})})),c.on("custom:deselection",(function(){return o(null)})),c.on("node:deselection",(function(e){return K("SELECTION",{canvas:c,selected:!1,node:e})})),c.on("node:moving",(function(e){return K("MOVE",{canvas:c,node:e})})),r(c),console.log(c)}}),[]),u=Object(l.useCallback)((function(){n.dispose()}),[n]),d=Object(l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;if(n){var t=$(n,{id:"node-".concat(n.nodeCount+1),title:(null===e||void 0===e?void 0:e.title)||n.nodeCount+1});n.add(t).setActiveObject(t),n.set({nodeCount:n.nodeCount+1}),console.log(n)}}),[n]),f=Object(l.useCallback)((function(e,t){n&&(K(e,Object(y.a)({canvas:n},t)),n.renderAll())}),[n]),b=Object(l.useCallback)((function(e,t,r){f("ADD_EDGE",{target:t,source:e,type:r,title:n.edgeCount+1,id:"edge-".concat(n.edgeCount+1)}),n.set({edgeNodeMap:Object(y.a)(Object(y.a)({},n.edgeNodeMap),{},Object(m.a)({},"".concat(T(e),"-").concat(T(t)),n.edgeCount+1)),edgeCount:n.edgeCount+1})}),[n,f]),j=Object(l.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("ADJMAT"===e){var r=n.nodeCount,c=[];Object(x.a)(Array(t.length)).forEach((function(e,t){var i=$(n,{id:"node-".concat(r+t+1),title:r+t+1});n.add(i),c.push(i)})),t.forEach((function(e,n){var r=c[n];e.forEach((function(e,i){"0"===e||n===i||t[i][n]===e&&i>n||b(r.id,c[i].id,t[i][n]===e?k:M)}))})),o(null)}else console.log("Jld hi")}),[n,b]),h=Object(l.useCallback)((function(){return V(n)}),[n]),g=Object(l.useCallback)((function(){n.getObjects().filter((function(e){var t=e.type,n=e.isGrounded;return"node"===t&&n})).length<2?alert("Please ground atleast two nodes."):o({type:"equations"})}),[n]);return{canvas:n,initCanvas:s,resetCanvas:u,isCanvasActive:!!n,addNode:d,selected:a,updateNode:f,setSelected:o,addGraph:j,getFundamentalMatrix:h,generateEquations:g,addEdge:b}})),Z=n(0),ee=g.b.div(I||(I=Object(h.a)(["\n  ","\n  width: 100%;\n  justify-content: flex-start;\n  height: 100%;\n"])),O),te=g.b.div(D||(D=Object(h.a)(["\n  width: 75%;\n  height: 100%;\n"]))),ne=g.b.div(P||(P=Object(h.a)(["\n  ","\n  width: 25%;\n  height: 100%;\n  justify-content: flex-start;\n"])),v),re=g.b.div(L||(L=Object(h.a)([""]))),ce=g.b.div(q||(q=Object(h.a)([""]))),ie=g.b.div(_||(_=Object(h.a)([""])));var ae=function(){var e=Object(l.useRef)(null),t=Object(l.useRef)(null),n=Q.useContainer().initCanvas;return Object(l.useEffect)((function(){t.current&&n(t,"main-canvas",{width:e.current.clientWidth,height:e.current.clientHeight,backgroundColor:"#F2F2F2",preserveObjectStacking:!0,nodeCount:0,edgeCount:0,edgeNodeMap:{}})}),[n]),Object(Z.jsx)(te,{ref:e,children:Object(Z.jsx)("canvas",{id:"main-canvas",ref:t})})};function oe(e){!function(e){e.getObjects(k).forEach((function(e){e.set({eangle:B(e)})}))}(e);var t=V(e),n=[];return console.log(t),t.forEach((function(t){for(var r=t.length,c=-1,i=[],a=0;a<r&&-1===c;a++)G(e,t[a]).isGrounded&&(c=a);if(-1!==c){for(var o=c,s=0;s<r;s++){var u=t[o],d=t[(o+1)%r],l="+";if(o===(c+r-1)%r){var f=[d,u];u=f[0],d=f[1],l="-"}var b=J(e,u,d);b.eangle.title!=="".concat(u,"-").concat(d)&&b.set({eangle:{title:"".concat(u,"-").concat(d),value:(b.eangle.value+180)%360}}),i.push({title:b.eangle.title,angle:b.eangle.value,length:z(b),sign:l}),o=(o+1)%r}n.push(i)}else console.error("No grounded nodes")})),n}var se=function(){var e=Object(l.useState)(!0),t=Object(C.a)(e,2),n=t[0],r=t[1],c=Object(l.useRef)(null),i=Q.useContainer().canvas;return Object(l.useEffect)((function(){c.current=oe(i),console.log(c.current),r(!1)}),[r]),Object(Z.jsx)(ie,{children:n?"loading ...":Object(Z.jsx)(Z.Fragment,{children:c.current.map((function(e,t){var n="";return e.forEach((function(e,t){var r=e.title,c=e.sign;0===t&&"-"!==c||(n=n.concat("".concat(c," "))),n=n.concat("l_".concat(r,"e^(itheta_").concat(r,") "))})),n=n.concat("= 0"),console.log(n),Object(Z.jsx)("li",{children:n},"eq-".concat(t))}))})})};var ue=function(){var e=Object(l.useState)(""),t=Object(C.a)(e,2),n=t[0],r=t[1],c=Object(l.useState)("ADJMAT"),i=Object(C.a)(c,2),a=i[0],o=(i[1],Q.useContainer().addGraph);return Object(Z.jsxs)(re,{children:[Object(Z.jsx)("h3",{children:"Add a graph"}),Object(Z.jsxs)("form",{children:[Object(Z.jsx)("p",{children:"Insert Adjacency Matrix"}),Object(Z.jsx)("textarea",{rows:"4",name:"graph-input",value:n,onChange:function(e){r(e.target.value)}}),Object(Z.jsx)("br",{}),Object(Z.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var t=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t={message:"all good",status:"true"};if("ADJMAT"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ADJMAT")){var n=e.replace(/\n+/g,"\n").trim().split("\n").map((function(e){return e.replace(/\s+/g," ").trim().split(" ")}));if(n.every((function(e,r){return e.length===n.length||(t={message:"Please input a square matrix. Row ".concat(r+1," of invalid size"),status:!1},!1)})),!t.status)return t;t={status:!0,message:n}}return t}(a,n);t.status?(o(a,t.message),r("")):alert(t.message)},children:"Add"})]})]})};var de=function(){var e,t=Q.useContainer().getFundamentalMatrix,n=Object(l.useState)(!0),r=Object(C.a)(n,2),c=r[0],i=r[1],a=Object(l.useRef)(null);return Object(l.useEffect)((function(){a.current=t(),i(!1)}),[i,t]),Object(Z.jsx)(ce,{children:c?"loading...":Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("h3",{children:"Fundamental Circuits:"}),Object(Z.jsx)("ul",{children:(null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.length)&&a.current.map((function(e,t){return Object(Z.jsx)("li",{children:e.map((function(e){return e+" "}))},"fundamental-".concat(t))}))})]})})};var le=function(e){var t=e.edgeNodeMap,n=e.node,r=n.id,c=n.edges,i=e.otherNodes,a=e.addEdge;return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("h5",{children:"Edges:"}),c.length>0?Object(Z.jsx)("ul",{children:Object.entries(t).map((function(e){var t=Object(C.a)(e,1)[0].split("-").map((function(e){return"node-".concat(e)}));return t[0]===r?Object(Z.jsxs)("li",{children:["Edge with ",t[1]]},"".concat(t[1])):t[1]===r?Object(Z.jsxs)("li",{children:["Edge with ",t[0]]},"".concat(t[0])):""}))}):Object(Z.jsx)("p",{children:"No edges for this node."}),i.length>0?Object(Z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(r,e.target.getElementsByTagName("select")[0].value,k)},children:[Object(Z.jsx)("label",{htmlFor:"edge",children:"Add edge: "}),Object(Z.jsx)("select",{name:"edge",children:i.map((function(e){return Object(Z.jsx)("option",{value:e,children:e},e)}))}),Object(Z.jsx)("button",{type:"submit",children:"Add Edge"})]}):Object(Z.jsx)("p",{children:"No node available for an edge"})]})};var fe=function(e){var t=e.node,n=t.id,r=t.text,c=t.isGrounded,i=e.handleChange;return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)("p",{children:["Id: ",n]}),Object(Z.jsx)("label",{htmlFor:"text",children:"Name:"}),Object(Z.jsx)("input",{value:r,name:"text","data-action":"PROPERTY_CHANGE",onChange:i}),Object(Z.jsx)("label",{htmlFor:"isGrounded",children:"Grounded:"}),Object(Z.jsx)("input",{type:"checkbox",checked:c,name:"isGrounded","data-action":"PROPERTY_CHANGE",onChange:i})]})};var be=function(){var e=Q.useContainer(),t=e.canvas,n=e.updateNode,r=e.selected,c=e.addEdge,i=Object(l.useState)(r),a=Object(C.a)(i,2),o=a[0],s=a[1],u=Object(l.useState)([]),d=Object(C.a)(u,2),f=d[0],b=d[1];return Object(l.useEffect)((function(){s((function(e){return Object(y.a)(Object(y.a)({},e),r)}))}),[r]),Object(l.useEffect)((function(){b(t.getObjects("node").filter((function(e){var n=e.id;return n!==r.id&&Object.entries(t.edgeNodeMap).map((function(e){var t=Object(C.a)(e,1)[0].split("-").map((function(e){return"node-".concat(e)}));return!(t[0]===r.id&&t[1]===n||t[1]===r.id&&t[0]===n)})).reduce((function(e,t){return e&t}),!0)})).map((function(e){return e.id})))}),[b,r,t]),Object(Z.jsxs)("div",{className:"node-options",children:[Object(Z.jsx)(fe,{node:o,handleChange:function(e){var t;t="checkbox"===e.target.type?Object(m.a)({},e.target.name,e.target.checked):Object(m.a)({},e.target.name,e.target.value),s((function(e){return Object(y.a)(Object(y.a)({},e),t)})),n(e.target.getAttribute("data-action"),t)}}),Object(Z.jsx)(le,{node:r,edgeNodeMap:t.edgeNodeMap,otherNodes:f,addEdge:c})]})};var je=function(){var e=Q.useContainer().selected;return Object(Z.jsx)(ne,{children:e?function(){switch(e.type){case"node":return Object(Z.jsx)(be,{});case"graph":return Object(Z.jsx)(ue,{});case"graph-properties":return Object(Z.jsx)(de,{});case"equations":return Object(Z.jsx)(se,{});default:return Object(Z.jsx)("div",{children:"Error"})}}():"Select an object to view its properties"})};var he,ge=function(){return Object(Z.jsxs)(ee,{children:[Object(Z.jsx)(je,{}),Object(Z.jsx)(ae,{})]})},ve=g.b.div(he||(he=Object(h.a)(["\n  ","\n  box-sizing: border-box;\n  padding: 1em;\n  width: 100%;\n  justify-content: flex-start;\n  border-bottom: 1px solid ",";\n"])),O,"#BFBFBF");var Oe=function(){var e=Q.useContainer(),t=e.isCanvasActive,n=e.addNode,r=e.setSelected,c=e.generateEquations;return Object(Z.jsxs)(ve,{children:[Object(Z.jsx)("button",{onClick:function(){return t?n():console.log("Canvas not loaded")},className:"navbar-btn",disabled:!t,children:"Add Node"}),Object(Z.jsx)("button",{onClick:function(){return t?r({type:"graph"}):console.error("Canvas not loaded")},className:"navbar-btn",disabled:!t,children:"Add Graph"}),Object(Z.jsx)("button",{onClick:function(){return r({type:"graph-properties"})},className:"navbar-btn",children:"View Cycles"}),Object(Z.jsx)("button",{onClick:function(){return t?c():console.error("Canvas not loaded")},className:"navbar-btn",disabled:!t,children:"Generate equations"})]})};var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return function(n){return e.reduce((function(e,t){return Object(Z.jsx)(t.Provider,{children:e})}),Object(Z.jsx)(t,Object(y.a)({},n)))}}}([Q])((function(){return Object(Z.jsxs)(p,{children:[Object(Z.jsx)(Oe,{}),Object(Z.jsx)(ge,{})]})})),xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};n(40),j.a.render(Object(Z.jsx)(f.a.StrictMode,{children:Object(Z.jsx)(pe,{})}),document.getElementById("root")),xe()}},[[41,1,2]]]);
//# sourceMappingURL=main.67f57d6a.chunk.js.map